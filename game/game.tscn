[gd_scene load_steps=38 format=3 uid="uid://c7s7t0l0r87ea"]

[ext_resource type="Shader" uid="uid://dbdaintllwjv0" path="res://shader/moving_background.gdshader" id="1_fegy3"]
[ext_resource type="PackedScene" uid="uid://chldd6futyqxb" path="res://common/object/boxes/boxes.tscn" id="1_hb504"]
[ext_resource type="Texture2D" uid="uid://hjry3cklyvri" path="res://background/background_restricted_area.png" id="1_hbvmx"]
[ext_resource type="PackedScene" uid="uid://byxbcaf1scbhq" path="res://player/player.tscn" id="1_l1rk1"]
[ext_resource type="Texture2D" uid="uid://cqsfhit0irycd" path="res://background/background_toserba.png" id="2_fegy3"]
[ext_resource type="Shader" uid="uid://c7nkn3qt468fs" path="res://player/damage_shader_test.gdshader" id="3_dxrkv"]
[ext_resource type="PackedScene" uid="uid://dsuxwx28ircol" path="res://enemy/enemy_spawner.tscn" id="4_4fuuu"]
[ext_resource type="Script" uid="uid://uwp46gwnfjob" path="res://game/score_manager.gd" id="5_dxrkv"]
[ext_resource type="PackedScene" uid="uid://bljp5jihpmr8f" path="res://game/ui/score_ui_control.tscn" id="6_y36n6"]
[ext_resource type="PackedScene" uid="uid://bl7fwt0y4dv4k" path="res://game/ui/health_ui_control.tscn" id="7_l8g03"]
[ext_resource type="PackedScene" uid="uid://dn53g2i6s2v5e" path="res://game/ui/button_control.tscn" id="8_qf6n1"]
[ext_resource type="Script" uid="uid://dvcnqfc257ap1" path="res://game/player_die_canvas.gd" id="9_3vho3"]
[ext_resource type="LabelSettings" uid="uid://mj62uk12jtlr" path="res://assets/font/label_setting.tres" id="9_58yx1"]
[ext_resource type="Script" uid="uid://c0n5c44kd2o8f" path="res://game/notice_ui.gd" id="9_hbvmx"]
[ext_resource type="PackedScene" uid="uid://bsbw3tjr063ou" path="res://ui/player_die_ui.tscn" id="9_j8tme"]
[ext_resource type="Shader" uid="uid://b6tgdk2xk2i6i" path="res://crt_shader/vhs.gdshader" id="9_l8g03"]
[ext_resource type="PackedScene" uid="uid://c4r6pj4ykxsbb" path="res://common/object/book_display/book_display.tscn" id="14_b686c"]
[ext_resource type="PackedScene" uid="uid://cojt5388xembg" path="res://common/object/metal_cabinet/metal_cabinet.tscn" id="16_58yx1"]
[ext_resource type="PackedScene" uid="uid://bywkqv0d0qou1" path="res://common/object/small_chair/small_chair.tscn" id="17_hbvmx"]
[ext_resource type="PackedScene" uid="uid://cex342afo4i7q" path="res://common/object/crate/crate.tscn" id="18_fegy3"]
[ext_resource type="PackedScene" uid="uid://d0ybj20tb2k78" path="res://common/object/gas_cylinder/gas_cylinder.tscn" id="19_pvdu1"]
[ext_resource type="PackedScene" uid="uid://c7vojnu1bqdld" path="res://common/object/sack_of_rice/sack_of_rice.tscn" id="20_cf130"]
[ext_resource type="PackedScene" uid="uid://digt76h7o0eci" path="res://common/object/snack_display/snack_display.tscn" id="21_posua"]
[ext_resource type="PackedScene" uid="uid://cst8m5kcrg08r" path="res://common/object/wooden_chair/wooden_chair.tscn" id="22_gvtgv"]
[ext_resource type="PackedScene" uid="uid://cvra8la8etmvw" path="res://common/object/water_jug/water_jug.tscn" id="23_5ywmu"]
[ext_resource type="PackedScene" uid="uid://yop8ft77reaj" path="res://common/object/light_brown_cabinet/light_brown_cabinet.tscn" id="24_mhp6k"]
[ext_resource type="PackedScene" uid="uid://c0xgfumm13vgd" path="res://common/object/fridge_display/fridge_display.tscn" id="25_vkvnp"]
[ext_resource type="PackedScene" uid="uid://6ads4lsdimtp" path="res://common/object/fan/fan.tscn" id="26_urpib"]
[ext_resource type="PackedScene" uid="uid://dbpklr08gu4ow" path="res://common/object/brown_cabinet/brown_cabinet.tscn" id="27_cieqw"]
[ext_resource type="PackedScene" uid="uid://dfqcu1s2h616t" path="res://common/object/desk_counter/desk_counter.tscn" id="28_ta815"]
[ext_resource type="PackedScene" uid="uid://b742fn3vj3o42" path="res://common/object/white_cabinet/white_cabinet.tscn" id="29_64wtb"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_pvdu1"]
shader = ExtResource("1_fegy3")
shader_parameter/h_speed = 0.05
shader_parameter/v_speed = 0.05
shader_parameter/alpha = 1.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dakft"]
shader = ExtResource("3_dxrkv")
shader_parameter/opacity = 1.0
shader_parameter/blink_active = false
shader_parameter/flash_active = false
shader_parameter/blink_speed = 20.0
shader_parameter/flash_mix_strength = 1.0
shader_parameter/blink_mix_strength = 1.0
shader_parameter/blink_color = Vector3(1, 1, 1)
shader_parameter/flash_color = Vector3(1, 0, 0)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_pvdu1"]
vertices = PackedVector2Array(771.547, 1540.02, 1464.28, 1537.02, 2051.91, 1535.98, 2509, 1631.48, 93.1484, 1861.87, -17.8594, 1851.94, 3274.9, 1687.03, 4081.39, 1684.97, 3216.48, 2030.96, -1478, 195.82, -1246, 188.07, -360.242, 181.93, 44.7734, 231.688, -1147, 405.188, -1325.86, 401.812, 91.8516, 1948.81, 2122.94, 2036.05, -661.922, 2008.02, -84.1484, 1952.2, 3788, 574.133, 2706.65, 559.812, 1716.41, 466.703, 1712.59, 373.938, 3481.13, 124.117, 4084.93, 116.883, 2053.09, 1406.95, 2049.1, 994.977, 2721.21, 878.109, 3788, 865.891, 4076.63, 1559.99, 2806.91, 1484, -82.8594, 1864.13, -198.148, 1853.06, 4450, -470.922, 4450.99, 2857.99, 3976, 2701, 3976, 2564.87, -2214.02, 2855, 3428.18, 2701, 3425.82, 2572.13, 3226.55, 2219.97, 3686, -465.07, 4086.07, -50.9688, 3686, -385.031, -2094.2, -368.969, 3478.87, -53.0312, 2570.82, -96.8594, 777.062, 90.0234, 775.938, 270.953, 432.078, 206.359, 430.906, 73.1406, 2047.9, 871.891, 1574.41, 537.062, 2715.03, 582.859, -403.711, 795.07, -407.273, 668.102, 1405.13, 535.93, 1465, 878.109, 775.906, 868.898, 3276.09, 1561.01, 2808.08, 1617.54, -19.1406, 1760.81, 2573.18, 33.8984, 1451.94, 274.047, 1453.06, 88.9766, 2144.08, 38.1016, 1537.79, 375.047, -355.75, 0.953125, 2142.92, -103.148, 48.2109, 67.8594, -664.078, 1740.99, -2223.96, -476.656, -2092.19, -472.328, -1478, 110.227, -1246, 5.04688, 1403.9, 444.539, -707.906, 664.891, -1147, 493.938, 1460.72, 1410.05, 764.477, 1406.9, 777.094, 996.109, -1668.73, 105.742, -1662.33, 199.172, -132, 2194.25, 2124.06, 2223.03, -332.148, 2209.82, -132, 2096.88, -330.883, 2117.99, 1465, 996.023, 182.898, 989.891, 181.906, 1413.11, 184.102, 875.102, -196.859, 1764.19, 1578.42, 470.727, -1327.14, 495.062, -1714.88, 1742.01, -1718.12, 2005.98, -709.094, 792.93, 1531.37, 407.109, 183.094, 1538.98, 2509, 1484)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 7, 8), PackedInt32Array(9, 10, 11, 12, 13, 14), PackedInt32Array(15, 8, 16, 17, 18), PackedInt32Array(19, 20, 21, 22, 23, 24), PackedInt32Array(25, 26, 27, 28, 29, 30), PackedInt32Array(5, 4, 31, 32), PackedInt32Array(7, 33, 34, 35, 36), PackedInt32Array(33, 7, 29), PackedInt32Array(33, 29, 28, 24), PackedInt32Array(35, 34, 37, 38), PackedInt32Array(7, 36, 39, 40, 8), PackedInt32Array(41, 33, 42, 43), PackedInt32Array(44, 43, 42, 45, 46), PackedInt32Array(47, 48, 49, 50), PackedInt32Array(27, 26, 51), PackedInt32Array(52, 20, 53, 27, 51, 54, 55, 56), PackedInt32Array(54, 51, 57, 58), PackedInt32Array(59, 6, 60, 30), PackedInt32Array(3, 60, 6, 5, 61), PackedInt32Array(45, 23, 62, 46), PackedInt32Array(63, 64, 65, 62, 23, 22, 66), PackedInt32Array(67, 44, 68, 65, 64, 47, 50), PackedInt32Array(67, 50, 69), PackedInt32Array(11, 67, 69, 12), PackedInt32Array(44, 46, 68), PackedInt32Array(15, 4, 8), PackedInt32Array(18, 17, 70, 32), PackedInt32Array(37, 71, 72, 44), PackedInt32Array(10, 9, 73, 74), PackedInt32Array(49, 48, 75, 56, 55, 76, 77, 13, 12), PackedInt32Array(78, 1, 0, 79, 80), PackedInt32Array(44, 67, 74), PackedInt32Array(44, 74, 73, 81), PackedInt32Array(37, 44, 81, 82), PackedInt32Array(83, 16, 84, 37, 85), PackedInt32Array(16, 83, 86), PackedInt32Array(17, 16, 86), PackedInt32Array(17, 86, 87), PackedInt32Array(26, 25, 78, 88), PackedInt32Array(57, 88, 78, 80, 58), PackedInt32Array(89, 80, 79, 90), PackedInt32Array(54, 58, 91), PackedInt32Array(40, 39, 38, 37, 84), PackedInt32Array(32, 31, 18), PackedInt32Array(92, 32, 70), PackedInt32Array(52, 93, 21, 20), PackedInt32Array(54, 91, 89), PackedInt32Array(37, 82, 9, 14, 94, 95), PackedInt32Array(17, 87, 85, 37, 96), PackedInt32Array(54, 89, 90, 97), PackedInt32Array(63, 66, 98, 75, 48), PackedInt32Array(97, 90, 99, 61, 92, 70, 94, 77), PackedInt32Array(24, 42, 33), PackedInt32Array(24, 28, 19), PackedInt32Array(77, 76, 97), PackedInt32Array(95, 96, 37), PackedInt32Array(70, 95, 94), PackedInt32Array(3, 61, 99, 0), PackedInt32Array(100, 3, 2, 25), PackedInt32Array(30, 100, 25), PackedInt32Array(30, 29, 59)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-1236, 15, -1236, 178, -370, 172, -366, 11), PackedVector2Array(58, 78, 55, 221, 422, 197, 421, 83), PackedVector2Array(787, 100, 786, 261, 1442, 264, 1443, 99), PackedVector2Array(2725, 581, 2731, 868, 3778, 856, 3778, 584, 2721, 570), PackedVector2Array(3489, -43, 3491, 114, 4075, 107, 4076, -41), PackedVector2Array(2153, -93, 2154, 28, 2563, 24, 2561, -87), PackedVector2Array(-698, 675, -699, 783, -414, 785, -417, 678), PackedVector2Array(194, 885, 193, 980, 767, 986, 766, 879), PackedVector2Array(1475, 888, 1475, 986, 2039, 985, 2038, 882), PackedVector2Array(1471, 1420, 1474, 1527, 2042, 1526, 2043, 1417), PackedVector2Array(2519, 1494, 2519, 1621, 2798, 1608, 2797, 1494), PackedVector2Array(2133, 2046, 2134, 2213, 3216, 2210, 3207, 2041), PackedVector2Array(-321, 2127, -322, 2199, -142, 2185, -142, 2108), PackedVector2Array(-1705, 1752, -1708, 1996, -672, 1998, -674, 1751), PackedVector2Array(192, 1423, 193, 1529, 761, 1530, 755, 1417), PackedVector2Array(-1316, 412, -1317, 485, -1157, 484, -1157, 415), PackedVector2Array(-1658, 116, -1653, 189, -1488, 186, -1488, 120), PackedVector2Array(3286, 1571, 3285, 1677, 4071, 1675, 4067, 1570), PackedVector2Array(3436, 2582, 3438, 2691, 3966, 2691, 3966, 2575), PackedVector2Array(-187, 1774, -188, 1843, -28, 1842, -29, 1771), PackedVector2Array(-73, 1874, -74, 1942, 82, 1939, 83, 1872), PackedVector2Array(1414, 452, 1415, 526, 1565, 527, 1569, 461, 1706, 457, 1703, 384, 1546, 385, 1540, 415), PackedVector2Array(-2234, -487, -2082, -482, -2084, -379, 3676, -395, 3676, -475, 4460, -481, 4461, 2868, -2224, 2865)])

[sub_resource type="Curve2D" id="Curve2D_pvdu1"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 5000, -1000, 0, 0, 0, 0, 5000, 3000, 0, 0, 0, 0, -5000, 3000, 0, 0, 0, 0, -5000, -1000)
}
point_count = 4

[sub_resource type="ShaderMaterial" id="ShaderMaterial_l8g03"]
shader = ExtResource("9_l8g03")
shader_parameter/overlay = true
shader_parameter/scanlines_opacity = 0.0
shader_parameter/scanlines_width = 0.25
shader_parameter/grille_opacity = 0.05
shader_parameter/resolution = Vector2(640, 480)
shader_parameter/pixelate = false
shader_parameter/roll = false
shader_parameter/roll_speed = 2.0
shader_parameter/roll_size = 0.0
shader_parameter/roll_variation = 5.0
shader_parameter/distort_intensity = 0.05
shader_parameter/noise_opacity = 0.4
shader_parameter/noise_speed = 5.0
shader_parameter/static_noise_intensity = 0.06
shader_parameter/aberration = -0.00199995
shader_parameter/brightness = 1.1
shader_parameter/discolor = false
shader_parameter/warp_amount = 0.3
shader_parameter/clip_warp = false
shader_parameter/vignette_intensity = 0.4
shader_parameter/vignette_opacity = 0.22
shader_parameter/custom_tint = Color(1.05098, 0.8, 0.643137, 1)
shader_parameter/custom_tint_intensity = 0.169
shader_parameter/tone_style = 0
shader_parameter/tone_intensity = 0.4

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_fegy3"]
distance = -80.0

[node name="Game" type="Node2D"]
y_sort_enabled = true

[node name="RestrictedArea" type="TextureRect" parent="."]
material = SubResource("ShaderMaterial_pvdu1")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -10000.0
offset_top = -10000.0
offset_right = 10000.0
offset_bottom = 10000.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("1_hbvmx")
stretch_mode = 1

[node name="Background" type="TextureRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -3370.0
offset_top = -1900.0
offset_right = 3370.0
offset_bottom = 1900.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("2_fegy3")
stretch_mode = 3

[node name="Player" parent="." instance=ExtResource("1_l1rk1")]
material = SubResource("ShaderMaterial_dakft")

[node name="NavigationRegion" type="NavigationRegion2D" parent="."]
visible = false
position = Vector2(-1116, -989)
navigation_polygon = SubResource("NavigationPolygon_pvdu1")

[node name="EnemySpawnPath" type="Path2D" parent="."]
curve = SubResource("Curve2D_pvdu1")

[node name="EnemySpawner" parent="." instance=ExtResource("4_4fuuu")]
initial_max_enemies = 3
path_node = NodePath("../EnemySpawnPath")
initial_difficulty_override = 1.0

[node name="ScoreManager" type="Node2D" parent="." groups=["utils"]]
script = ExtResource("5_dxrkv")

[node name="ComboTimer" type="Timer" parent="ScoreManager"]

[node name="GameUI" type="CanvasLayer" parent="."]

[node name="ScoreUIControl" parent="GameUI" instance=ExtResource("6_y36n6")]
offset_left = -77.0
offset_top = 51.0
offset_right = -37.0
offset_bottom = 91.0

[node name="HealthUIControl" parent="GameUI" instance=ExtResource("7_l8g03")]
offset_left = 20.0
offset_top = 27.0
offset_right = 60.0
offset_bottom = 67.0

[node name="ButtonControl" parent="GameUI" instance=ExtResource("8_qf6n1")]

[node name="NoticeControl" type="Control" parent="GameUI"]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("9_hbvmx")

[node name="NewHichScoreLabel" type="Label" parent="GameUI/NoticeControl"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -363.0
offset_top = -320.0
offset_right = 363.0
offset_bottom = -246.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(363, 35)
text = "New High Score!"
label_settings = ExtResource("9_58yx1")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = 128

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_l8g03")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="PlayerDieCanvas" type="CanvasLayer" parent="."]
layer = 128
follow_viewport_scale = 1.901
script = ExtResource("9_3vho3")
player = NodePath("../Player")

[node name="PlayerDieUI" parent="PlayerDieCanvas" instance=ExtResource("9_j8tme")]
visible = false

[node name="BookDisplay" parent="." instance=ExtResource("14_b686c")]
position = Vector2(-640, 506)

[node name="Boxes" parent="." instance=ExtResource("1_hb504")]
position = Vector2(1240, -1000)

[node name="BookDisplay2" parent="." instance=ExtResource("14_b686c")]
position = Vector2(640, 506)

[node name="BookDisplay3" parent="." instance=ExtResource("14_b686c")]
position = Vector2(-640, -32)

[node name="BookDisplay4" parent="." instance=ExtResource("14_b686c")]
position = Vector2(640, -32)

[node name="MetalCabinet" parent="." instance=ExtResource("16_58yx1")]
position = Vector2(-2304, 976)

[node name="SmallChair" parent="." instance=ExtResource("17_hbvmx")]
position = Vector2(376, -480)

[node name="SmallChair2" parent="." instance=ExtResource("17_hbvmx")]
position = Vector2(504, -544)

[node name="Crate" parent="." instance=ExtResource("18_fegy3")]
position = Vector2(-1672, -240)

[node name="DeskCounter" parent="." instance=ExtResource("19_pvdu1")]
position = Vector2(-1920, -856)

[node name="MetalCabinet2" parent="." instance=ExtResource("16_58yx1")]
position = Vector2(2136, -184)

[node name="SackOfRice" parent="." instance=ExtResource("20_cf130")]
position = Vector2(1552, 1184)

[node name="SmallChair3" parent="." instance=ExtResource("17_hbvmx")]
position = Vector2(-1224, 840)

[node name="SmallChair4" parent="." instance=ExtResource("17_hbvmx")]
position = Vector2(-1112, 936)

[node name="SnackDisplay" parent="." instance=ExtResource("21_posua")]
position = Vector2(0, -1440)

[node name="WhiteCabinet" parent="." instance=ExtResource("22_gvtgv")]
position = Vector2(-883, -825)

[node name="WaterJug" parent="." instance=ExtResource("23_5ywmu")]
position = Vector2(2672, -912)

[node name="SmallChair5" parent="." instance=ExtResource("17_hbvmx")]
position = Vector2(-2352, -520)

[node name="SmallChair6" parent="." instance=ExtResource("17_hbvmx")]
position = Vector2(-2688, -816)

[node name="LightBrownCabinet" parent="." instance=ExtResource("24_mhp6k")]
position = Vector2(2560, 656)

[node name="FridgeDisplay" parent="." instance=ExtResource("25_vkvnp")]
position = Vector2(1000, -1432)

[node name="Fan" parent="." instance=ExtResource("26_urpib")]
position = Vector2(1152, -1056)

[node name="Fan2" parent="." instance=ExtResource("26_urpib")]
position = Vector2(-1352, 1168)

[node name="BrownCabinet" parent="." instance=ExtResource("27_cieqw")]
position = Vector2(1544, -1430)

[node name="BrownCabinet2" parent="." instance=ExtResource("27_cieqw")]
position = Vector2(1816, -1432)

[node name="BrownCabinet3" parent="." instance=ExtResource("27_cieqw")]
position = Vector2(2096, -1432)

[node name="BrownCabinet4" parent="." instance=ExtResource("27_cieqw")]
position = Vector2(2376, -1432)

[node name="Crate2" parent="." instance=ExtResource("18_fegy3")]
position = Vector2(1544, 584)

[node name="DeskCounter2" parent="." instance=ExtResource("28_ta815")]
position = Vector2(0, -776)

[node name="WhiteCabinet2" parent="." instance=ExtResource("29_64wtb")]
position = Vector2(-2936, -1408)

[node name="WhiteCabinet3" parent="." instance=ExtResource("29_64wtb")]
position = Vector2(-2456, -1408)

[node name="WhiteCabinet4" parent="." instance=ExtResource("29_64wtb")]
position = Vector2(-1976, -1408)

[node name="WhiteCabinet5" parent="." instance=ExtResource("29_64wtb")]
position = Vector2(2584, 1672)

[node name="WorldBorder" type="Node2D" parent="."]

[node name="Down" type="StaticBody2D" parent="WorldBorder"]
position = Vector2(0, 1848)
collision_layer = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="WorldBorder/Down"]
shape = SubResource("WorldBoundaryShape2D_fegy3")

[node name="Up" type="StaticBody2D" parent="WorldBorder"]
position = Vector2(0, -1392)
rotation = 3.14159
collision_layer = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="WorldBorder/Up"]
shape = SubResource("WorldBoundaryShape2D_fegy3")

[node name="Left" type="StaticBody2D" parent="WorldBorder"]
position = Vector2(-3280, 0)
rotation = 1.5708
collision_layer = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="WorldBorder/Left"]
shape = SubResource("WorldBoundaryShape2D_fegy3")

[node name="Right" type="StaticBody2D" parent="WorldBorder"]
position = Vector2(3280, 0)
rotation = -1.5708
collision_layer = 8

[node name="CollisionShape2D" type="CollisionShape2D" parent="WorldBorder/Right"]
shape = SubResource("WorldBoundaryShape2D_fegy3")

[node name="LightBrownCabinet2" parent="." instance=ExtResource("24_mhp6k")]
position = Vector2(-1128, -1416)
