[gd_scene load_steps=17 format=3 uid="uid://c7s7t0l0r87ea"]

[ext_resource type="Texture2D" uid="uid://c66foqpixvgx6" path="res://game/background/repeating_background.png" id="1_4fuuu"]
[ext_resource type="PackedScene" uid="uid://byxbcaf1scbhq" path="res://player/player.tscn" id="1_l1rk1"]
[ext_resource type="Shader" uid="uid://c7nkn3qt468fs" path="res://player/damage_shader_test.gdshader" id="3_dxrkv"]
[ext_resource type="PackedScene" uid="uid://dsuxwx28ircol" path="res://enemy/enemy_spawner.tscn" id="4_4fuuu"]
[ext_resource type="Script" uid="uid://uwp46gwnfjob" path="res://game/score_manager.gd" id="5_dxrkv"]
[ext_resource type="PackedScene" uid="uid://bljp5jihpmr8f" path="res://game/ui/score_ui_control.tscn" id="6_y36n6"]
[ext_resource type="PackedScene" uid="uid://bl7fwt0y4dv4k" path="res://game/ui/health_ui_control.tscn" id="7_l8g03"]
[ext_resource type="Script" path="res://game/button_control.gd" id="8_j8tme"]
[ext_resource type="PackedScene" uid="uid://cq8r2d04jnnbl" path="res://game/ui/rps_button.tscn" id="8_l8g03"]
[ext_resource type="Script" uid="uid://dvcnqfc257ap1" path="res://game/player_die_canvas.gd" id="9_3vho3"]
[ext_resource type="PackedScene" uid="uid://bsbw3tjr063ou" path="res://ui/player_die_ui.tscn" id="9_j8tme"]
[ext_resource type="Shader" uid="uid://b6tgdk2xk2i6i" path="res://crt_shader/vhs.gdshader" id="9_l8g03"]
[ext_resource type="Texture2D" uid="uid://ellby238chfw" path="res://assets/foreground.png" id="13_vsp63"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dakft"]
shader = ExtResource("3_dxrkv")
shader_parameter/opacity = 1.0
shader_parameter/blink_active = false
shader_parameter/flash_active = false
shader_parameter/blink_speed = 20.0
shader_parameter/flash_mix_strength = 1.0
shader_parameter/blink_mix_strength = 1.0
shader_parameter/blink_color = Vector3(1, 1, 1)
shader_parameter/flash_color = Vector3(1, 0, 0)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_dxrkv"]
vertices = PackedVector2Array(4544, -912.078, 4544, 2665, -2137, 2665, -2137, -970.906)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-2147, -981, -2147, 2675, 4554, 2675, 4554, -922)])

[sub_resource type="ShaderMaterial" id="ShaderMaterial_l8g03"]
shader = ExtResource("9_l8g03")
shader_parameter/overlay = true
shader_parameter/scanlines_opacity = 0.175
shader_parameter/scanlines_width = 0.25
shader_parameter/grille_opacity = 0.064
shader_parameter/resolution = Vector2(640, 480)
shader_parameter/pixelate = false
shader_parameter/roll = false
shader_parameter/roll_speed = 2.0
shader_parameter/roll_size = 0.0
shader_parameter/roll_variation = 5.0
shader_parameter/distort_intensity = 0.05
shader_parameter/noise_opacity = 0.4
shader_parameter/noise_speed = 5.0
shader_parameter/static_noise_intensity = 0.06
shader_parameter/aberration = -0.00199995
shader_parameter/brightness = 1.4
shader_parameter/discolor = false
shader_parameter/warp_amount = 0.3
shader_parameter/clip_warp = false
shader_parameter/vignette_intensity = 0.4
shader_parameter/vignette_opacity = 0.22
shader_parameter/custom_tint = Color(0.995558, 0.961445, 0.939133, 1)
shader_parameter/custom_tint_intensity = 0.4
shader_parameter/tone_style = 0
shader_parameter/tone_intensity = 0.4

[node name="Game" type="Node2D"]
y_sort_enabled = true

[node name="TextureRect" type="TextureRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -2165.0
offset_top = -950.0
offset_right = 4575.0
offset_bottom = 2708.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("1_4fuuu")
stretch_mode = 1

[node name="Player" parent="." instance=ExtResource("1_l1rk1")]
material = SubResource("ShaderMaterial_dakft")
position = Vector2(587, 298)

[node name="NavigationRegion" type="NavigationRegion2D" parent="."]
visible = false
position = Vector2(7, 8)
navigation_polygon = SubResource("NavigationPolygon_dxrkv")

[node name="EnemySpawner" parent="." instance=ExtResource("4_4fuuu")]
spawn_interval = 1.0

[node name="ScoreManager" type="Node2D" parent="." groups=["utils"]]
script = ExtResource("5_dxrkv")

[node name="ComboTimer" type="Timer" parent="ScoreManager"]

[node name="GameUI" type="CanvasLayer" parent="."]

[node name="ScoreUIControl" parent="GameUI" instance=ExtResource("6_y36n6")]

[node name="HealthUIControl" parent="GameUI" instance=ExtResource("7_l8g03")]

[node name="ButtonControl" type="Control" parent="GameUI"]
layout_mode = 3
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -20.0
offset_top = -40.0
offset_right = 20.0
grow_horizontal = 2
grow_vertical = 0
script = ExtResource("8_j8tme")

[node name="ButtonContainer" type="HBoxContainer" parent="GameUI/ButtonControl"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -250.0
offset_top = -62.0
offset_right = 250.0
grow_horizontal = 2
grow_vertical = 0
theme_override_constants/separation = 250
alignment = 1

[node name="RockButton" parent="GameUI/ButtonControl/ButtonContainer" instance=ExtResource("8_l8g03")]
layout_mode = 2

[node name="PaperButton" parent="GameUI/ButtonControl/ButtonContainer" instance=ExtResource("8_l8g03")]
layout_mode = 2

[node name="ScissorButton" parent="GameUI/ButtonControl/ButtonContainer" instance=ExtResource("8_l8g03")]
layout_mode = 2

[node name="PlayerDieCanvas" type="CanvasLayer" parent="."]
layer = 128
follow_viewport_scale = 1.901
script = ExtResource("9_3vho3")
player = NodePath("../Player")

[node name="PlayerDieUI" parent="PlayerDieCanvas" instance=ExtResource("9_j8tme")]
visible = false

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = 128

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_l8g03")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Foreground" type="Sprite2D" parent="."]
position = Vector2(1360, 1048)
texture = ExtResource("13_vsp63")
